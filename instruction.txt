install odoo 16 instance on port 8069
add systemd unit to add odoo as linux service and enable it to automatic start service on system startup
install nginx on system
enable enginx to automatic startup :sudo systemctl enable nginx
start service with : sudo service nginx start, check service status with sudo service nginx status


- Although this step is optional, it is a good security practice. Moreover, by default Odoo server listens to port 8069 on all interfaces, so if you want to disable the direct access to your Odoo instance,  open the Odoo configuration and add the following two lines of command at the end of the file:

/etc/odoo.conf

xmlrpc_interface = 127.0.0.1
netrpc_interface = 127.0.0.1
- Now save the configuration file and restart the Odoo server for the changes to take effect using the following code:

systemctl restart odoo


As the NGINX is installed and the binding interface is changed let's now move on to configuring it in the next section.

Configure NGINX

- Initially edit the current Nginx server block in the old domain or create a new server block if it is not created yet.

- Now add the following lines of code to configure NGINX:

Cd /etc/nginx/sites-enabled

Create a Nginx Server Block for your Domain:
nano /etc/nginx/sites-available/thisdomain.com



server {
    server_name testing.com 111.111.111.111; //replace ip and server name with your domain and ip
    listen 80;
    access_log /var/log/nginx/testing-access.log;
    error_log /var/log/nginx/testing-error.log;
    location /longpolling {
        proxy_connect_timeout   3600;
        proxy_read_timeout      3600;
        proxy_send_timeout      3600;
        send_timeout            3600;
        proxy_pass http://127.0.0.1:8072;
}
    location / {
        proxy_connect_timeout   3600;
        proxy_read_timeout      3600;
        proxy_send_timeout      3600;
        send_timeout            3600;
        proxy_pass http://127.0.0.1:8069/;
        proxy_set_header Host $http_host;
        proxy_set_header X-Forwarded-Host $http_host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    gzip on;
    gzip_min_length 1000;
}
upstream odoo {
server 127.0.0.1:8069 weight=1 fail_timeout=0;
}
upstream odoo-im {
server 127.0.0.1:8072 weight=1 fail_timeout=0;
}






